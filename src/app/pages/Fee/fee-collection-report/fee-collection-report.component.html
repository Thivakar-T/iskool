<div class="container-fluid">
    <div class="mb-3">
      <!-- <app-page-title title="Fee Collection Report"></app-page-title> -->
      <div class="mb-2 pageHeading">
        <h4 class="">Fee Collection Report</h4>
      </div>
    </div>
    <div class="col-12">
      <form [formGroup]="feeForm" autocomplete="off">
        <div class="row">
          <div class="col-xl-6 ">
            <div class="card-2 cardBorder ">
              <label class="card-2-hedaing">Criteria</label>
              <div class="card-body card-max-height ">
                <div class="form-group pt-2">
                  <div class="form-group ">
                    <label class="control-label">Report Type</label>
                    <ng-select [items]="reportTypeArr" id="reportType"
                       placeholder="Choose" formControlName="reportType" bindLabel="disp" bindValue="val" [ngClass]="{ 'is-invalid': feeSubmitted && f.reportType.errors || f.reportType.invalid && (f.reportType.dirty || f.reportType.touched)}">
                    </ng-select>
                    <div *ngIf="feeSubmitted && f.reportType.errors || f.reportType.invalid && (f.reportType.dirty || f.reportType.touched)"
                    class="invalid-feedback">
                    <div *ngIf="f.reportType.errors.required">Required</div>
                  </div>
                  </div>


                  <div class="row">
                    <div class="col-xl-6 ">

                  <div class="form-group ">
                    <label class="control-label">From Date</label>
                    <input class="form-control"  ngbDatepicker
                    #fromDate="ngbDatepicker" (click)="fromDate.toggle()"
                     placeholder="yyyy/mm/dd" name="value" formControlName="fromDate" [ngClass]="{ 'is-invalid': feeSubmitted && f.fromDate.errors || f.fromDate.invalid && (f.fromDate.dirty || f.fromDate.touched)}">
                    <div *ngIf="feeSubmitted && f.fromDate.errors || f.fromDate.invalid && (f.fromDate.dirty || f.fromDate.touched)"
                    class="invalid-feedback">
                    <div *ngIf="f.fromDate.errors.required">Required</div>
                  </div>
                  </div>
                </div>
                <div class="col-xl-6 ">

                  <div class="form-group ">
                    <label class="control-label">To Date</label>
                    <input class="form-control"  ngbDatepicker
                    #toDate="ngbDatepicker" (click)="toDate.toggle()"
                     placeholder="yyyy/mm/dd" name="value" formControlName="toDate" [ngClass]="{ 'is-invalid': feeSubmitted && f.toDate.errors || f.toDate.invalid && (f.toDate.dirty || f.toDate.touched)}">
                    <div *ngIf="feeSubmitted && f.toDate.errors || f.toDate.invalid && (f.toDate.dirty || f.toDate.touched)"
                    class="invalid-feedback">
                    <div *ngIf="f.toDate.errors.required">Required</div>
                  </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-xl-6 ">
                  <div class="form-group ">
                    <label class="control-label">Counter Number</label>
                    <ng-select [items]="counterArr" id="counterId" 
                       placeholder="Choose" formControlName="counterId" (change)="getCounter($event)" bindLabel="name" bindValue="id" [ngClass]="{ 'is-invalid': feeSubmitted && f.counterId.errors || f.counterId.invalid && (f.counterId.dirty || f.counterId.touched)}">
                    </ng-select>
                    <div *ngIf="feeSubmitted && f.counterId.errors || f.counterId.invalid && (f.counterId.dirty || f.counterId.touched)"
                    class="invalid-feedback">
                    <div *ngIf="f.counterId.errors.required">Required</div>
                  </div>
                  </div>
                </div>
                <div class="col-xl-6 ">
                  <div class="form-group">
                    <label class="control-label">Payment Mode</label>
                    <ng-select [items]="paymentModeArr" bindLabel="disp" bindValue="val" id="paymentMode" class="custom" placeholder="Choose"  formControlName="paymentMode"
                    [ngClass]="{ 'is-invalid': feeSubmitted && f.paymentMode.errors || f.paymentMode.invalid && (f.paymentMode.dirty || f.paymentMode.touched)}">
                    </ng-select>
                    <div *ngIf="feeSubmitted && f.paymentMode.errors || f.paymentMode.invalid && (f.paymentMode.dirty || f.paymentMode.touched)"
                    class="invalid-feedback">
                    <div *ngIf="f.paymentMode.errors.required">Required</div>
                  </div>
                  </div>
                </div>
              </div>
                </div>
                <div class="text-right top">
                    <button type="submit" class="btn btn-success ml-1 text-right" (click)="search()">Search</button>
                </div>
              </div>
            </div>
            
          </div>
          <div class="col-xl-6 ">
            <div class="card-2 cardBorder ">
              <label class="card-2-hedaing">Filter</label>
              <div class="card-body card-max-height ">
                <div class="form-group pt-2">
                  <label class="control-label">Acadamic Year</label>
                  <ng-select [items]="yearArr"  (change)="select($event)" id="academicyearId" bindLabel="name" bindValue="id"
                    placeholder="Choose" formControlName="academicYearId" [ngClass]="{ 'is-invalid': filtersubmit && f.academicYearId.errors || f.academicYearId.invalid && (f.academicYearId.dirty || f.academicYearId.touched)}">
                  </ng-select>
                  <div *ngIf="filtersubmit && f.academicYearId.errors || f.academicYearId.invalid && (f.academicYearId.dirty || f.academicYearId.touched)"
                  class="invalid-feedback">
                  <div *ngIf="f.academicYearId.errors.required">Required</div>
                </div>
                </div>
                <div class="form-group ">
                  <label class="control-label"> Standard</label>
                  <ng-select [items]="stdArr"  (change)="selectModule($event)" id="standardId" bindLabel="name" bindValue="id"
                    placeholder="Choose" formControlName="stdId" [ngClass]="{ 'is-invalid': filtersubmit && f.stdId.errors || f.stdId.invalid && (f.stdId.dirty || f.stdId.touched)}">
                  </ng-select>
                  <div *ngIf="filtersubmit && f.stdId.errors || f.stdId.invalid && (f.stdId.dirty || f.stdId.touched)"
                  class="invalid-feedback">
                  <div *ngIf="f.stdId.errors.required">Required</div>
                </div>
                </div>
                <div class="form-group ">
                  <label class="control-label"> Section</label>
                  <ng-select [items]="secArr"  (change)="getCountry($event)" id="sectionId" bindLabel="name" bindValue="id"
                    placeholder="Choose" formControlName="sectionId" [ngClass]="{ 'is-invalid': filtersubmit && f.sectionId.errors || f.sectionId.invalid && (f.sectionId.dirty || f.sectionId.touched)}">
                  </ng-select>
                  <div *ngIf="filtersubmit && f.sectionId.errors || f.sectionId.invalid && (f.sectionId.dirty || f.sectionId.touched)"
                  class="invalid-feedback">
                  <div *ngIf="f.sectionId.errors.required">Required</div>
                </div>
                </div>
                <div class="mt-2 mb-1 text-right">
                  <button type="button" class="btn btn-primary ml-1 text-right" (click)="apply()">Apply</button>
                  <button  (click)="reset()" class="btn btn-danger ml-1 text-right">Reset</button>
                 
                  
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-12 " *ngIf="enableFeeCard" >
            <div class="card-2">
              <label class="card-2-hedaing">Criteria</label>
              <div class="container ">
                <div formArrayName="responseList">
                  <perfect-scrollbar class="" [config]="configData">

                  <div class="card-body feecard">
                    <table id="example" class="table" style="width:100%">
                      <thead>
                        <tr>
                          <th width="5%">S.No</th>
                          <th width="15%">Roll.No</th>
                          <th width="15%">Student Name</th>
                          <th width="10%">Standard</th>
                          <th width="5%">Section</th>
                          <th width="10%">Receipt Date</th>
                          <th width="10%">Paid Amount</th>
                          
                        </tr>
                      </thead>
                      <tbody *ngFor="let rollObj of rollArr.controls; let i = index" [formGroupName]="i">
                        <tr >
                          <td><span class="ml-3">
                            {{i+1}}
                          </span></td>
                          <td>
                            <div class=" form-group ">
                              <input class=" form-control style" id="border" type="text" class="form-control"
                                placeholder="Roll No" formControlName="rollNumber" readonly>
                            </div>
                          </td>
                          <td>
                            <div class=" form-group ">
                              <input class=" form-control style" id="border" type="text" class="form-control"
                                placeholder="Student Name" formControlName="stuName" readonly>
                            </div>
                          </td>
                          <td>
                            <div class=" form-group ">
                              <input class=" form-control style" id="border" type="text" class="form-control"
                                placeholder="Standard" formControlName="stdName" readonly>
                            </div>
                          </td>
                          <td>
                            <div class=" form-group ">
                              <input class=" form-control style" id="border" type="text" class="form-control"
                                placeholder="Section" formControlName="sectionName" readonly>
                            </div>
                          </td>
                          <td>
                            <div class=" form-group ">
                              <input class="form-control" id="border" type="text" class="form-control"
                                placeholder="ReceiptDate" formControlName="receiptDate" readonly>
                            </div>
                          </td>
                          <td>
                            <div class=" form-group">
                              <input class="form-control" id="border" type="text" class="form-control"
                                placeholder="PaidAmount" formControlName="paidAmount" readonly>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  </perfect-scrollbar>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>